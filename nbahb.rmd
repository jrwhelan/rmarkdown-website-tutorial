---
title: "Basketball Prediction"
---

## Introduction


----


## Data

```{r dataload, echo=T, warning=FALSE, message=F}
library(nbastatR)
library(tidyverse)
library(lubridate)

today <- today(tzone = "EST")
historyCut <- year(today)-2

playerRef <- nba_players()
teamRef <- nba_teams()

teamCodes <- teamRef %>%
	dplyr::select(slugTeam, idTeam)

playerLogs <- game_logs(
  seasons = 2019,
  league = "NBA",
  result_types = "player",
  season_types = "Regular Season",
  nest_data = F,
  assign_to_environment = TRUE,
  return_message = TRUE
)

teamLogs <- game_logs(
  seasons = historyCut:year(today),
  league = "NBA",
  result_types = "team",
  season_types = "Regular Season",
  nest_data = F,
  assign_to_environment = TRUE,
  return_message = TRUE
)


winners <- teamLogs %>%
    dplyr::filter(locationGame=="H") %>%
    mutate(n=1) %>%
    pivot_wider(
      id_cols = idGame,
      names_from = slugTeamWinner,
      names_prefix = "win_",
      values_from = n,
      values_fill = list(n = 0)
    )


losers <- teamLogs %>%
    dplyr::filter(locationGame=="H") %>%
    mutate(n=1) %>%
    pivot_wider(
      id_cols = idGame,
      names_from = slugTeamLoser,
      names_prefix = "lose_",
      values_from = n,
      values_fill = list(n = 0)
    )

winloss <- winners %>%
	left_join(losers)

```

----




